angular.module("myApp").service("apiService",["$http","$q",function(n,e){let r="/api",u={headers:{"Content-Type":"application/json"}};function i(t){return console.error("API请求错误:",t),e.reject(t)}this.get=function(t,e){return n.get(r+t,{params:e,...u}).catch(i)},this.post=function(t,e){return n.post(r+t,e,u).catch(i)},this.put=function(t,e){return n.put(r+t,e,u).catch(i)},this.delete=function(t){return n.delete(r+t,u).catch(i)}}]),angular.module("myApp").service("userService",["apiService","$q",function(n,t){let e=null;this.getUsers=function(t){return n.get("/users",t).then(function(t){return Array.isArray(t.data)?t.data:[]})},this.getUser=function(t){return n.get("/users/"+t).then(function(t){return t.data})},this.createUser=function(t){return n.post("/users",t).then(function(t){return t.data})},this.updateUser=function(t,e){return n.put("/users/"+t,e).then(function(t){return t.data})},this.deleteUser=function(t){return n.delete("/users/"+t).then(function(t){return t.data})},this.getCurrentUser=function(){return e?t.resolve(e):n.get("/users/current").then(function(t){return e=t.data})},this.clearCache=function(){e=null}}]);